#include <eosiolib/eosio.hpp>
#include <eosio/native/tester.hpp>

using namespace eosio::native;

// Defined in `eosio.cdt/libraries/eosiolib/symbol.hpp`
EOSIO_TEST_BEGIN(symbol_type_test)
   eosio_assert( eosio::name{0ULL}.value == 0ULL, "eosio::name != 0ULL" );
   eosio_assert( eosio::name{1ULL}.value == 1ULL, "eosio::name != 1ULL" );
   eosio_assert( eosio::name{18446744073709551615ULL}.value == 18446744073709551615ULL, "eosio::name != 18446744073709551615ULL" );

   // TODO Just use number
   eosio_assert( eosio::name{"1"}.value == 576460752303423488ULL, "eosio::name != 1" );
   eosio_assert( eosio::name{"5"}.value == 2882303761517117440ULL, "eosio::name != 5" );
   eosio_assert( eosio::name{"a"}.value == 3458764513820540928ULL, "eosio::name != a" );
   eosio_assert( eosio::name{"z"}.value == 17870283321406128128ULL, "eosio::name != z" );

   eosio_assert( eosio::name{"abc"}.value == 3589368903014285312ULL, "eosio::name != abc" );
   eosio_assert( eosio::name{"123"}.value == 614178399182651392ULL, "eosio::name != 123" );

   eosio_assert( eosio::name{".abc"}.value == 112167778219196416ULL, "eosio::name != .abc" );
   eosio_assert( eosio::name{"123."}.value == 614178399182651392ULL, "eosio::name != 123." );
   
   eosio_assert( eosio::name{"abc.123"}.value == 3589369488740450304ULL, "eosio::name != abc.123" );
   eosio_assert( eosio::name{"123.abc"}.value == 614181822271586304ULL, "eosio::name != 123.abc" );

   eosio_assert( eosio::name{"12345abcdefgj"}.value == 614251623682315983ULL, "eosio::name != 12345abcdefgj" );
   eosio_assert( eosio::name{"hijklmnopqrsj"}.value == 7754926748989239183ULL, "eosio::name != hijklmnopqrsj" );
   eosio_assert( eosio::name{"tuvwxyz.1234j"}.value == 14895601873741973071ULL, "eosio::name != tuvwxyz.1234j" );

   eosio_assert( eosio::name{"111111111111j"}.value == 595056260442243615ULL, "eosio::name != 111111111111j" );
   eosio_assert( eosio::name{"555555555555j"}.value == 2975281302211218015ULL, "eosio::name != 555555555555j" );
   eosio_assert( eosio::name{"aaaaaaaaaaaaj"}.value == 3570337562653461615ULL, "eosio::name != aaaaaaaaaaaaj" );
   eosio_assert( eosio::name{"zzzzzzzzzzzzj"}.value == 18446744073709551615ULL, "eosio::name != zzzzzzzzzzzzj" );

   REQUIRE_ASSERT( "character is not in allowed character set for names", ([]() {eosio::name{"-1"}.value;}) );

   REQUIRE_ASSERT( "character is not in allowed character set for names", ([]() {eosio::name{"0"}.value;}) );

   REQUIRE_ASSERT( "character is not in allowed character set for names", ([]() {eosio::name{"6"}.value;}) );

   REQUIRE_ASSERT( "thirteenth character in name cannot be a letter that comes after j", ([]() {eosio::name{"111111111111k"}.value;}) );

   REQUIRE_ASSERT( "thirteenth character in name cannot be a letter that comes after j", ([]() {eosio::name{"zzzzzzzzzzzzk"}.value;}) );

   REQUIRE_ASSERT( "the length must not be longer than 13 characters in an `eosio::name`", ([]() {eosio::name{"12345abcdefghj"}.value;}) );

   silence_output(false);
EOSIO_TEST_END

int main(int argc, char** argv) {
   EOSIO_TEST(symbol_type_test);
   return has_failed();
}
